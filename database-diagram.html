<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagrama de Base de Datos - Master API</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 100%;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .diagram-container {
            width: 100%;
            overflow-x: auto;
        }
        .legend {
            margin-top: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .legend h3 {
            margin-top: 0;
            color: #007bff;
        }
        .legend ul {
            margin: 10px 0;
        }
        .legend li {
            margin: 5px 0;
        }
        
        /* Collapsible styles */
        .collapsible {
            background-color: #007bff;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            margin: 10px 0 5px 0;
            transition: background-color 0.3s;
        }
        
        .collapsible:hover {
            background-color: #0056b3;
        }
        
        .collapsible:after {
            content: '\002B'; /* Plus sign */
            color: white;
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }
        
        .collapsible.active:after {
            content: '\2212'; /* Minus sign */
        }
        
        .collapsible-content {
            padding: 0;
            display: none;
            overflow: hidden;
            background-color: #f8f9fa;
            border-radius: 0 0 5px 5px;
            margin-bottom: 10px;
        }
        
        .collapsible-content.show {
            display: block;
            padding: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Diagrama de Base de Datos - Master API</h1>
        
        <div class="diagram-container">
            <div class="mermaid">
                erDiagram
                    %% Entidad de Usuarios (Multi-Usuario)
                    USERS {
                        BIGINT id PK
                        VARCHAR username UK
                        VARCHAR password
                        VARCHAR email UK
                        TIMESTAMP created_at
                        TIMESTAMP last_login
                    }
                    
                    %% Entidades Principales
                    CATEGORIES {
                        BIGINT id PK
                        VARCHAR name
                        VARCHAR description
                        TIMESTAMP creation
                        BIGINT user_id FK
                    }
                    
                    TASKS {
                        BIGINT id PK
                        VARCHAR title
                        TEXT description
                        TIMESTAMP creation
                        BIGINT user_id FK
                    }
                    
                    NOTES {
                        BIGINT id PK
                        VARCHAR title
                        TEXT note
                        TIMESTAMP creation
                        BIGINT user_id FK
                    }
                    
                    HABITS {
                        BIGINT id PK
                        VARCHAR name
                        TIMESTAMP creation
                        BIGINT user_id FK
                    }
                    
                    %% Entidad de Archivos Adjuntos
                    FILEATTACHMENTS {
                        BIGINT id PK
                        VARCHAR original_file_name
                        VARCHAR file_type
                        BIGINT file_size
                        TIMESTAMP upload_date
                        BYTEA file_data
                        VARCHAR entity_type
                        BIGINT entity_id
                        BIGINT user_id FK
                    }
                    
                    %% Entidades de Historial
                    CATEGORYHISTORY {
                        BIGINT historyId PK
                        BIGINT versionId
                        BIGINT category_id FK
                        VARCHAR name
                        VARCHAR description
                        TIMESTAMP creation
                        TIMESTAMP timestamp
                    }
                    
                    TASKHISTORY {
                        BIGINT historyId PK
                        BIGINT versionId
                        BIGINT task_id FK
                        VARCHAR title
                        TEXT description
                        TIMESTAMP creation
                        TIMESTAMP timestamp
                    }
                    
                    NOTEHISTORY {
                        BIGINT historyId PK
                        BIGINT versionId
                        BIGINT note_id FK
                        VARCHAR title
                        TEXT noteContent
                        TIMESTAMP creation
                        TIMESTAMP timestamp
                    }
                    
                    HABITHISTORY {
                        BIGINT historyId PK
                        BIGINT versionId
                        BIGINT habit_id FK
                        VARCHAR name
                        TIMESTAMP creation
                        TIMESTAMP timestamp
                    }
                    
                    %% Tablas de Relación Many-to-Many
                    TASKCATEGORIES {
                        BIGINT TaskId FK
                        BIGINT CategoryId FK
                    }
                    
                    NOTECATEGORIES {
                        BIGINT NoteId FK
                        BIGINT CategoryId FK
                    }
                    
                    HABITCATEGORIES {
                        BIGINT HabitId FK
                        BIGINT CategoryId FK
                    }
                    
                    NOTETASKS {
                        BIGINT NoteId FK
                        BIGINT TaskId FK
                    }
                    
                    HABITNOTES {
                        BIGINT HabitId FK
                        BIGINT NoteId FK
                    }
                    
                    HABITTASKS {
                        BIGINT HabitId FK
                        BIGINT TaskId FK
                    }
                    
                    %% Relaciones One-to-Many (Usuario a Entidades)
                    USERS ||--o{ CATEGORIES : "posee"
                    USERS ||--o{ TASKS : "posee"
                    USERS ||--o{ NOTES : "posee"
                    USERS ||--o{ HABITS : "posee"
                    USERS ||--o{ FILEATTACHMENTS : "posee"
                    
                    %% Relaciones One-to-Many (Historial)
                    CATEGORIES ||--o{ CATEGORYHISTORY : "tiene historial"
                    TASKS ||--o{ TASKHISTORY : "tiene historial"
                    NOTES ||--o{ NOTEHISTORY : "tiene historial"
                    HABITS ||--o{ HABITHISTORY : "tiene historial"
                    
                    %% Relaciones Many-to-Many a través de tablas intermedias
                    CATEGORIES ||--o{ TASKCATEGORIES : "categoriza"
                    TASKS ||--o{ TASKCATEGORIES : "pertenece a"
                    
                    CATEGORIES ||--o{ NOTECATEGORIES : "categoriza"
                    NOTES ||--o{ NOTECATEGORIES : "pertenece a"
                    
                    CATEGORIES ||--o{ HABITCATEGORIES : "categoriza"
                    HABITS ||--o{ HABITCATEGORIES : "pertenece a"
                    
                    NOTES ||--o{ NOTETASKS : "relaciona con"
                    TASKS ||--o{ NOTETASKS : "relaciona con"
                    
                    HABITS ||--o{ HABITNOTES : "relaciona con"
                    NOTES ||--o{ HABITNOTES : "relaciona con"
                    
                    HABITS ||--o{ HABITTASKS : "relaciona con"
                    TASKS ||--o{ HABITTASKS : "relaciona con"
            </div>
        </div>
        
        <div class="legend">
            <h3>Leyenda del Diagrama</h3>
            <ul>
                <li><strong>Entidad de Usuarios:</strong>
                    <ul>
                        <li><strong>USERS:</strong> Usuarios del sistema con autenticación y autorización. Cada usuario tiene sus propios datos aislados</li>
                    </ul>
                </li>
                <li><strong>Entidades Principales:</strong>
                    <ul>
                        <li><strong>CATEGORIES:</strong> Categorías para organizar elementos (pertenecen a un usuario específico)</li>
                        <li><strong>TASKS:</strong> Tareas con título y descripción (pertenecen a un usuario específico)</li>
                        <li><strong>NOTES:</strong> Notas con título y contenido (pertenecen a un usuario específico)</li>
                        <li><strong>HABITS:</strong> Hábitos con nombre (pertenecen a un usuario específico)</li>
                    </ul>
                </li>
                <li><strong>Entidad de Archivos:</strong>
                    <ul>
                        <li><strong>FILEATTACHMENTS:</strong> Archivos e imágenes adjuntos almacenados directamente en PostgreSQL como BYTEA. Soporta relaciones polimórficas con cualquier entidad</li>
                    </ul>
                </li>
                <li><strong>Entidades de Historial:</strong> Cada entidad principal tiene su tabla de historial correspondiente que guarda versiones anteriores</li>
                <li><strong>Tablas de Relación:</strong> Implementan las relaciones Many-to-Many entre las entidades principales</li>
                <li><strong>Tipos de Relaciones:</strong>
                    <ul>
                        <li><strong>||--o{:</strong> Relación One-to-Many (un usuario puede tener muchas entidades, una entidad puede tener muchos registros de historial)</li>
                        <li><strong>Many-to-Many:</strong> Implementadas a través de tablas intermedias</li>
                    </ul>
                </li>
            </ul>
            
            <h3>Relaciones Principales</h3>
            <ul>
                <li><strong>Users → Entidades:</strong> Relación One-to-Many (un usuario puede tener múltiples categorías, tareas, notas, hábitos y archivos)</li>
                <li><strong>Categories ↔ Tasks/Notes/Habits:</strong> Relación Many-to-Many (una categoría puede tener múltiples elementos, un elemento puede pertenecer a múltiples categorías)</li>
                <li><strong>Notes ↔ Tasks:</strong> Relación Many-to-Many (una nota puede relacionarse con múltiples tareas)</li>
                <li><strong>Habits ↔ Notes:</strong> Relación Many-to-Many (un hábito puede relacionarse con múltiples notas)</li>
                <li><strong>Habits ↔ Tasks:</strong> Relación Many-to-Many (un hábito puede relacionarse con múltiples tareas)</li>
                <li><strong>FileAttachments → Entidades:</strong> Relación polimórfica (un archivo puede estar asociado a cualquier entidad usando entity_type y entity_id)</li>
                <li><strong>Historial:</strong> Cada entidad principal tiene una relación One-to-Many con su tabla de historial correspondiente</li>
            </ul>
            
            <h3>Características del Sistema Multi-Usuario</h3>
            <ul>
                <li><strong>Aislamiento de Datos:</strong> Cada usuario solo puede acceder a sus propios datos</li>
                <li><strong>Autenticación JWT:</strong> Sistema de autenticación basado en tokens JWT</li>
                <li><strong>Autorización:</strong> Todas las operaciones requieren autenticación y verifican la propiedad de los datos</li>
                <li><strong>Seguridad:</strong> Las contraseñas se almacenan encriptadas y los endpoints están protegidos</li>
            </ul>
            
            <h3>Sistema de Archivos Adjuntos</h3>
            <ul>
                <li><strong>Almacenamiento en Base de Datos:</strong> Los archivos se almacenan como BYTEA directamente en PostgreSQL</li>
                <li><strong>Soporte Polimórfico:</strong> Un archivo puede estar asociado a cualquier entidad (Category, Task, Note, Habit)</li>
                <li><strong>Metadatos Completos:</strong> Se almacena nombre original, tipo MIME, tamaño y fecha de subida</li>
                <li><strong>Seguridad:</strong> Solo el propietario puede acceder a sus archivos</li>
                <li><strong>Límites:</strong> Tamaño máximo de archivo configurado en 10MB</li>
            </ul>
        </div>
    </div>
    
    <div class="legend">
        <h3>Endpoints de la API</h3>
        
        <button class="collapsible">Endpoints de Autenticación</button>
        <div class="collapsible-content">
        <ul>
            <li><strong>POST /auth/register</strong>: Registrar un nuevo usuario
                <ul>
                    <li><strong>Request Body</strong>: Objeto UserRegistrationDto
                        <ul>
                            <li><code>username</code>: string - Nombre de usuario único (requerido)</li>
                            <li><code>email</code>: string - Correo electrónico único (requerido)</li>
                            <li><code>password</code>: string - Contraseña (requerida)</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Mensaje de confirmación [201]</li>
                </ul>
            </li>
            <li><strong>POST /auth/login</strong>: Iniciar sesión
                <ul>
                    <li><strong>Request Body</strong>: Objeto LoginDto
                        <ul>
                            <li><code>username</code>: string - Nombre de usuario (requerido)</li>
                            <li><code>password</code>: string - Contraseña (requerida)</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto con token JWT [200]
                        <ul>
                            <li><code>token</code>: string - Token JWT para autenticación</li>
                            <li><code>type</code>: string - Tipo de token ("Bearer")</li>
                            <li><code>username</code>: string - Nombre del usuario autenticado</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        </div>
        
        <button class="collapsible">Endpoints de Gestión de Archivos</button>
        <div class="collapsible-content">
        <ul>
            <li><strong>POST /api/files/upload/{entityType}/{entityId}</strong>: Subir archivo a una entidad
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>entityType</code>: string [path] - Tipo de entidad ("CATEGORY", "TASK", "NOTE", "HABIT")</li>
                            <li><code>entityId</code>: integer($int64) [path] - ID de la entidad</li>
                            <li><code>file</code>: file [form-data] - Archivo a subir (máximo 10MB)</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Objeto FileAttachmentDto [200]</li>
                </ul>
            </li>
            <li><strong>GET /api/files/download/{fileId}</strong>: Descargar archivo
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>fileId</code>: integer($int64) [path] - ID del archivo</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Archivo binario [200]</li>
                </ul>
            </li>
            <li><strong>GET /api/files/entity/{entityType}/{entityId}</strong>: Obtener archivos de una entidad
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>entityType</code>: string [path] - Tipo de entidad</li>
                            <li><code>entityId</code>: integer($int64) [path] - ID de la entidad</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Array de FileAttachmentDto [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /api/files/{fileId}</strong>: Eliminar archivo
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>fileId</code>: integer($int64) [path] - ID del archivo</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Sin contenido [200]</li>
                </ul>
            </li>
        </ul>
        </div>
        
        <button class="collapsible">Endpoints de Tareas (Tasks)</button>
        <div class="collapsible-content">
        <p><strong>Nota:</strong> Todos los endpoints requieren autenticación JWT y solo devuelven datos del usuario autenticado.</p>
        <ul>
            <li><strong>GET /tasks</strong>: Obtener todas las tareas del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Task - Contenido de la página actual
                                <ul>
                                    <li><code>id</code>: integer($int64) - ID único de la tarea</li>
                                    <li><code>title</code>: string - Título de la tarea</li>
                                    <li><code>description</code>: string - Descripción detallada de la tarea</li>
                                    <li><code>creation</code>: string($date-time) - Fecha de creación</li>
                                    <li><code>categories</code>: Array de objetos Category - Categorías asociadas</li>
                                </ul>
                            </li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /tasks/{id}</strong>: Obtener una tarea por ID del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea a obtener</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Task [200] - Tarea encontrada</li>
                            <li>Error [404] - Tarea no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /tasks</strong>: Crear una nueva tarea para el usuario autenticado
                <ul>
                    <li><strong>Request Body</strong>: Objeto TaskRequest
                        <ul>
                            <li><code>title</code>: string - Título de la tarea (requerido)</li>
                            <li><code>description</code>: string - Descripción detallada</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Objeto Task creado [201]</li>
                </ul>
            </li>
            <li><strong>PUT /tasks/{id}</strong>: Actualizar una tarea existente del usuario autenticado (reemplazo completo)
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto TaskRequest
                        <ul>
                            <li><code>title</code>: string - Título de la tarea (requerido)</li>
                            <li><code>description</code>: string - Descripción detallada</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Task actualizado [200]</li>
                            <li>Error [404] - Tarea no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>PATCH /tasks/{id}</strong>: Actualizar parcialmente una tarea existente del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto TaskRequest (campos opcionales)
                        <ul>
                            <li><code>title</code>: string - Título de la tarea</li>
                            <li><code>description</code>: string - Descripción detallada</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Task actualizado [200]</li>
                            <li>Error [404] - Tarea no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>DELETE /tasks/{id}</strong>: Eliminar una tarea por ID del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea a eliminar</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Sin contenido [204] - Tarea eliminada exitosamente</li>
                            <li>Error [404] - Tarea no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /tasks/{id}/categories</strong>: Obtener todas las categorías de una tarea del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Category - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /tasks/{id}/notes</strong>: Obtener todas las notas relacionadas con una tarea del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Note - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /tasks/{id}/habits</strong>: Obtener todos los hábitos relacionados con una tarea del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Habit - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /tasks/{id}/history</strong>: Obtener el historial de versiones de una tarea del usuario autenticado
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Respuesta</strong>: Array de objetos TaskHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>task</code>: Objeto Task - Referencia a la tarea original</li>
                            <li><code>title</code>: string - Título de la tarea en esta versión</li>
                            <li><code>description</code>: string - Descripción de la tarea en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /tasks/{id}/history/{versionId}</strong>: Obtener una versión específica del historial de una tarea
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la tarea</li>
                            <li><code>versionId</code>: integer($int64) [path] - ID de la versión</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto TaskHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>task</code>: Objeto Task - Referencia a la tarea original</li>
                            <li><code>title</code>: string - Título de la tarea en esta versión</li>
                            <li><code>description</code>: string - Descripción de la tarea en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /tasks/{taskId}/categories/{categoryId}</strong>: Agregar una categoría a una tarea
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /tasks/{taskId}/categories/{categoryId}</strong>: Eliminar una categoría de una tarea
                <ul>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
        </ul>
        </div>
        
        <button class="collapsible">Endpoints de Notas (Notes)</button>
        <div class="collapsible-content">
        <ul>
            <li><strong>GET /notes</strong>: Obtener todas las notas del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Note - Contenido de la página actual
                                <ul>
                                    <li><code>id</code>: integer($int64) - ID único de la nota</li>
                                    <li><code>title</code>: string - Título de la nota</li>
                                    <li><code>note</code>: string - Contenido de la nota</li>
                                    <li><code>creation</code>: string($date-time) - Fecha de creación</li>
                                    <li><code>categories</code>: Array de objetos Category - Categorías asociadas</li>
                                    <li><code>tasks</code>: Array de objetos Task - Tareas asociadas</li>
                                </ul>
                            </li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /notes/{id}</strong>: Obtener una nota por ID del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota a obtener</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Note [200] - Nota encontrada</li>
                            <li>Error [404] - Nota no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /notes</strong>: Crear una nueva nota para el usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Request Body</strong>: Objeto NoteRequest
                        <ul>
                            <li><code>title</code>: string - Título de la nota (requerido)</li>
                            <li><code>note</code>: string - Contenido de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto Note creado [201]</li>
                </ul>
            </li>
            <li><strong>PUT /notes/{id}</strong>: Actualizar una nota existente del usuario autenticado (reemplazo completo)
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto NoteRequest
                        <ul>
                            <li><code>title</code>: string - Título de la nota (requerido)</li>
                            <li><code>note</code>: string - Contenido de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Note actualizado [200]</li>
                            <li>Error [404] - Nota no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>PATCH /notes/{id}</strong>: Actualizar parcialmente una nota existente del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto NoteRequest (campos opcionales)
                        <ul>
                            <li><code>title</code>: string - Título de la nota</li>
                            <li><code>note</code>: string - Contenido de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Note actualizado [200]</li>
                            <li>Error [404] - Nota no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>DELETE /notes/{id}</strong>: Eliminar una nota por ID del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota a eliminar</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Sin contenido [204] - Nota eliminada exitosamente</li>
                            <li>Error [404] - Nota no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /notes/{id}/categories</strong>: Obtener todas las categorías de una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Category - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /notes/{id}/tasks</strong>: Obtener todas las tareas relacionadas con una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Task - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /notes/{id}/habits</strong>: Obtener todos los hábitos relacionados con una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Habit - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /notes/{id}/history</strong>: Obtener el historial de versiones de una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Array de objetos NoteHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>note</code>: Objeto Note - Referencia a la nota original</li>
                            <li><code>title</code>: string - Título de la nota en esta versión</li>
                            <li><code>note</code>: string - Contenido de la nota en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /notes/{id}/history/{versionId}</strong>: Obtener una versión específica del historial de una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>versionId</code>: integer($int64) [path] - ID de la versión</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto NoteHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>note</code>: Objeto Note - Referencia a la nota original</li>
                            <li><code>title</code>: string - Título de la nota en esta versión</li>
                            <li><code>note</code>: string - Contenido de la nota en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /notes/{noteId}/tasks/{taskId}</strong>: Agregar una tarea a una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>POST /notes/{noteId}/habits/{habitId}</strong>: Agregar un hábito a una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>POST /notes/{noteId}/categories/{categoryId}</strong>: Agregar una categoría a una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /notes/{noteId}/tasks/{taskId}</strong>: Eliminar una tarea de una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /notes/{noteId}/habits/{habitId}</strong>: Eliminar un hábito de una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /notes/{noteId}/categories/{categoryId}</strong>: Eliminar una categoría de una nota del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
        </ul>
        </div>
        
        <button class="collapsible">Endpoints de Hábitos (Habits)</button>
        <div class="collapsible-content">
        <ul>
            <li><strong>GET /habits</strong>: Obtener todos los hábitos del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Habit - Contenido de la página actual
                                <ul>
                                    <li><code>id</code>: integer($int64) - ID único del hábito</li>
                                    <li><code>name</code>: string - Nombre del hábito</li>
                                    <li><code>creation</code>: string($date-time) - Fecha de creación</li>
                                    <li><code>categories</code>: Array de objetos Category - Categorías asociadas</li>
                                </ul>
                            </li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /habits/{id}</strong>: Obtener un hábito por ID del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito a obtener</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Habit [200] - Hábito encontrado</li>
                            <li>Error [404] - Hábito no encontrado</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /habits</strong>: Crear un nuevo hábito para el usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Request Body</strong>: Objeto HabitRequest
                        <ul>
                            <li><code>name</code>: string - Nombre del hábito (requerido)</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto Habit creado [201]</li>
                </ul>
            </li>
            <li><strong>PUT /habits/{id}</strong>: Actualizar un hábito existente del usuario autenticado (reemplazo completo)
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto HabitRequest
                        <ul>
                            <li><code>name</code>: string - Nombre del hábito (requerido)</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Habit actualizado [200]</li>
                            <li>Error [404] - Hábito no encontrado</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>PATCH /habits/{id}</strong>: Actualizar parcialmente un hábito existente del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto HabitRequest (campos opcionales)
                        <ul>
                            <li><code>name</code>: string - Nombre del hábito</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Habit actualizado [200]</li>
                            <li>Error [404] - Hábito no encontrado</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>DELETE /habits/{id}</strong>: Eliminar un hábito por ID del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito a eliminar</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Sin contenido [204] - Hábito eliminado exitosamente</li>
                            <li>Error [404] - Hábito no encontrado</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /habits/{id}/categories</strong>: Obtener todas las categorías de un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Category - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /habits/{id}/tasks</strong>: Obtener todas las tareas relacionadas con un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Task - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /habits/{id}/notes</strong>: Obtener todas las notas relacionadas con un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Note - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /habits/{id}/history</strong>: Obtener el historial de versiones de un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Array de objetos HabitHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>habit</code>: Objeto Habit - Referencia al hábito original</li>
                            <li><code>name</code>: string - Nombre del hábito en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /habits/{id}/history/{versionId}</strong>: Obtener una versión específica del historial de un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>versionId</code>: integer($int64) [path] - ID de la versión</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto HabitHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>habit</code>: Objeto Habit - Referencia al hábito original</li>
                            <li><code>name</code>: string - Nombre del hábito en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /habits/{habitId}/tasks/{taskId}</strong>: Agregar una tarea a un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>POST /habits/{habitId}/notes/{noteId}</strong>: Agregar una nota a un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>POST /habits/{habitId}/categories/{categoryId}</strong>: Agregar una categoría a un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /habits/{habitId}/tasks/{taskId}</strong>: Eliminar una tarea de un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /habits/{habitId}/notes/{noteId}</strong>: Eliminar una nota de un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /habits/{habitId}/categories/{categoryId}</strong>: Eliminar una categoría de un hábito del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
        </ul>
        </div>
        
        <button class="collapsible">Endpoints de Categorías (Categories)</button>
        <div class="collapsible-content">
        <ul>
            <li><strong>GET /categories</strong>: Obtener todas las categorías del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Category - Contenido de la página actual
                                <ul>
                                    <li><code>id</code>: integer($int64) - ID único de la categoría</li>
                                    <li><code>name</code>: string - Nombre de la categoría</li>
                                    <li><code>description</code>: string - Descripción de la categoría</li>
                                    <li><code>creation</code>: string($date-time) - Fecha de creación</li>
                                </ul>
                            </li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/{id}</strong>: Obtener una categoría por ID del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría a obtener</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Category [200] - Categoría encontrada</li>
                            <li>Error [404] - Categoría no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>POST /categories</strong>: Crear una nueva categoría para el usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Request Body</strong>: Objeto CategoryRequest
                        <ul>
                            <li><code>name</code>: string - Nombre de la categoría (requerido)</li>
                            <li><code>description</code>: string - Descripción de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto Category creado [201]</li>
                </ul>
            </li>
            <li><strong>PUT /categories/{id}</strong>: Actualizar una categoría existente del usuario autenticado (reemplazo completo)
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto CategoryRequest
                        <ul>
                            <li><code>name</code>: string - Nombre de la categoría (requerido)</li>
                            <li><code>description</code>: string - Descripción de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Category actualizado [200]</li>
                            <li>Error [404] - Categoría no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>PATCH /categories/{id}</strong>: Actualizar parcialmente una categoría existente del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría a actualizar</li>
                        </ul>
                    </li>
                    <li><strong>Request Body</strong>: Objeto CategoryRequest (campos opcionales)
                        <ul>
                            <li><code>name</code>: string - Nombre de la categoría</li>
                            <li><code>description</code>: string - Descripción de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Objeto Category actualizado [200]</li>
                            <li>Error [404] - Categoría no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>DELETE /categories/{id}</strong>: Eliminar una categoría por ID del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría a eliminar</li>
                        </ul>
                    </li>
                    <li><strong>Respuestas</strong>:
                        <ul>
                            <li>Sin contenido [204] - Categoría eliminada exitosamente</li>
                            <li>Error [404] - Categoría no encontrada</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/{id}/tasks</strong>: Obtener todas las tareas de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Task - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/{id}/notes</strong>: Obtener todas las notas de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Note - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/{id}/habits</strong>: Obtener todos los hábitos de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>page</code>: integer [query] - Número de página (0-indexed, por defecto: 0)</li>
                            <li><code>size</code>: integer [query] - Tamaño de página (por defecto: 10)</li>
                            <li><code>sortBy</code>: string [query] - Campo por el cual ordenar (por defecto: "id")</li>
                            <li><code>sortDir</code>: string [query] - Dirección de ordenamiento ("asc" o "desc", por defecto: "asc")</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto paginado [200]
                        <ul>
                            <li><code>content</code>: Array de objetos Habit - Contenido de la página actual</li>
                            <li><code>currentPage</code>: integer - Número de página actual (0-indexed)</li>
                            <li><code>totalItems</code>: integer - Total de elementos</li>
                            <li><code>totalPages</code>: integer - Total de páginas</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/{id}/history</strong>: Obtener el historial de versiones de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Array de objetos CategoryHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>category</code>: Objeto Category - Referencia a la categoría original</li>
                            <li><code>name</code>: string - Nombre de la categoría en esta versión</li>
                            <li><code>description</code>: string - Descripción de la categoría en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/{id}/history/{versionId}</strong>: Obtener una versión específica del historial de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>id</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>versionId</code>: integer($int64) [path] - ID de la versión</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Objeto CategoryHistory [200]
                        <ul>
                            <li><code>historyId</code>: integer($int64) - ID único del registro de historial</li>
                            <li><code>versionId</code>: integer($int64) - ID de la versión del historial</li>
                            <li><code>category</code>: Objeto Category - Referencia a la categoría original</li>
                            <li><code>name</code>: string - Nombre de la categoría en esta versión</li>
                            <li><code>description</code>: string - Descripción de la categoría en esta versión</li>
                            <li><code>creation</code>: string($date-time) - Fecha de creación original</li>
                            <li><code>timestamp</code>: string($date-time) - Fecha y hora de esta versión</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>GET /categories/search/by-name</strong>: Buscar categorías por nombre (parcial) del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>name</code>: string [query] - Nombre parcial para buscar</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: Array de objetos Category [200]</li>
                </ul>
            </li>
            <li><strong>POST /categories/{categoryId}/tasks/{taskId}</strong>: Agregar una tarea a una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>POST /categories/{categoryId}/notes/{noteId}</strong>: Agregar una nota a una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>POST /categories/{categoryId}/habits/{habitId}</strong>: Agregar un hábito a una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /categories/{categoryId}/tasks/{taskId}</strong>: Eliminar una tarea de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>taskId</code>: integer($int64) [path] - ID de la tarea</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /categories/{categoryId}/notes/{noteId}</strong>: Eliminar una nota de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>noteId</code>: integer($int64) [path] - ID de la nota</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
            <li><strong>DELETE /categories/{categoryId}/habits/{habitId}</strong>: Eliminar un hábito de una categoría del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>:
                        <ul>
                            <li><code>categoryId</code>: integer($int64) [path] - ID de la categoría</li>
                            <li><code>habitId</code>: integer($int64) [path] - ID del hábito</li>
                        </ul>
                    </li>
                    <li><strong>Respuesta</strong>: OK [200]</li>
                </ul>
            </li>
        </ul>
        </div>
        
        <button class="collapsible">Endpoints de Dashboard</button>
        <div class="collapsible-content">
        <ul>
            <li><strong>GET /dashboard-stats</strong>: Obtener estadísticas del dashboard del usuario autenticado
                <ul>
                    <li><strong>Headers</strong>: Authorization: Bearer {token}</li>
                    <li><strong>Parámetros</strong>: Ninguno</li>
                    <li><strong>Respuesta</strong>: Objeto DashboardStats [200]
                        <ul>
                            <li><code>taskCount</code>: integer - Número total de tareas</li>
                            <li><code>noteCount</code>: integer - Número total de notas</li>
                            <li><code>habitCount</code>: integer - Número total de hábitos</li>
                            <li><code>categoryCount</code>: integer - Número total de categorías</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        </div>
    </div>
    
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            er: {
                fontSize: 12,
                useMaxWidth: true
            }
        });
        
        // Collapsible functionality
        document.addEventListener('DOMContentLoaded', function() {
            var collapsibles = document.getElementsByClassName('collapsible');
            
            for (var i = 0; i < collapsibles.length; i++) {
                collapsibles[i].addEventListener('click', function() {
                    this.classList.toggle('active');
                    var content = this.nextElementSibling;
                    
                    if (content.classList.contains('show')) {
                        content.classList.remove('show');
                    } else {
                        content.classList.add('show');
                    }
                });
            }
        });
    </script>
</body>
</html>